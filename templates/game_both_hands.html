<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>じゃんけんゲーム（両手モード）</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles_both.css') }}">
    <!-- TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    <!-- Hand Pose Detection Model -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/hand-pose-detection"></script>
</head>
<body>
    <h1>じゃんけんゲーム（両手モード）</h1>
    
    <!-- 準備中メッセージの追加 -->
    <div id="countdown"></div>
    <p id="preparation-message">準備中...お待ちください</p>
    <div id="tips">
        <img src="/static/img/tips.png" alt="Tips Image">
        <p>手をカメラの正面に、大きく映るようにしてください。</p>
        <p>手の形が明確にわかるように、背景がシンプルな場所でプレイしましょう。</p>
    </div>
    
    <div id="game">
        <!-- 両手の指示と手の画像 -->
        <div class="hands-container">
            <div class="hand-section">
                <p class="hand-command" id="command-left">左手の指示: </p>
                <img id="computer-left-hand-image" src="" alt="左手">
            </div>
            <div class="hand-section">
                <p class="hand-command" id="command-right">右手の指示: </p>
                <img id="computer-right-hand-image" src="" alt="右手">
            </div>
        </div>
        <!-- 正解画像の要素 -->
        <img id="correct-image" src="/static/img/correct.jpg" alt="正解" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10;">
        <p id="user-hands">あなたの手:  認識中です。お待ちください</p>

        <div class="status-container">
            <!-- ユーザーのカメラ映像 -->
            <video id="video" autoplay playsinline></video>
            <p id="timer">残り時間: 30秒</p>
            <p id="score">スコア: 0</p>
        </div>

    </div>

    <div id="result">
        <h2>ゲーム終了！</h2>
        <p id="final-score"></p>
        <form id="score-form">
            <label for="username">お名前を入力してください:</label>
            <input type="text" id="username" name="username" required>
            <button type="submit">スコアを共有</button>
        </form>
        <a href="/" class="button">ホームに戻る</a>
    </div>
    <audio id="correct-sound" src="{{ url_for('static', filename='sound/correct.wav') }}"></audio>
    <audio id="start-sound" src="{{ url_for('static', filename='sound/start.wav') }}"></audio>
    <script src="{{ url_for('static', filename='js/game_both.js') }}"></script>
</body>
</html>
